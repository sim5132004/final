<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="robots" content="ALL"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>INVITE > PARTY PEOPLE</title>
    <meta name="Description" content="인천시 다양한 모임에 맞는(회식/데이트/동호회) AI추천 모임장소에 대한 나만의 초대카드를 만들어보세요."/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=0.1,maximum-scale=5.0,user-scalable=yes" />
    <link rel="stylesheet" type="text/css" href="../css/reset.css" >
    <link rel="stylesheet" type="text/css" href="../css/layout.css" >
    <link rel="stylesheet" type="text/css" href="../css/card.css" >
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3fa5806dfe291fb3622cf85fca14b017&libraries=services,clusterer,drawing"></script>
    <script src="../js/jquery.js"></script>
    <!--구글 차트 관련 스크립트-->
    <script src="//kit.fontawesome.com/56b5cc4bd2.js" crossorigin="anonymous"></script><!-- 폰트어썸(아이콘 폰트) 사용 인증된 링크 -->
    <script src="../js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
</head>
<body>

<div class="container invite skin" id = "no">
    <!-- 모달 레이어 : 모임카드 미리보기 상세페이지 정보 -->
    <div class="modal_layer_wrap detail">
        <div class="layer_bg"></div>
        <div class="layer_box" id ="npo">
            <a href="#" class="close_layer"><i class="fa-solid fa-xmark"></i></a>
            <!-- 하단 각각 데이터 복붙 -->
        </div>
    </div>
    <!-- 모달 레이어 : 모임카드 미리보기 클릭시 > 최종 모임카드 디자인 레이어 노출  -->
    <div class="modal_layer_wrap card"  id="x2">
        <div class="layer_bg"></div>
        <div class="layer_box">
            <a href="#" class="close_layer"><i class="fa-solid fa-xmark"></i></a>
            <div class="layer_contents" id="x3">
                <h1>작성하신 내용을 확인 신 후, 모임카드 이미지를 다운로드하세요.
                    <a href="#" class="download" id="download"><i class="fa-solid fa-download"></i> 초대장(JPG) 다운로드</a>
                </h1>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        let captureDiv = document.getElementById('x3');
        let downloadButton = document.getElementById('download');
        setTimeout(function() {
            console.log('Works!');
        }, 3000);
        window.onload = function() {
            downloadButton.addEventListener('click', () => {
                setTimeout(function () {
                    console.log('Works!');
                }, 3000);
                html2canvas(captureDiv,
                    {
                        allowTaint: true,
                        useCORS: false,// CORS 를 사용하여 시도 하 여 서버에서 이미지 업로드
                        imageTimeout: 10000,
                        // foreignObjectRendering: true,
                        logging: true,
                        // removeContainer: true,
                    }
                ).then(canvas => {
                    saveImg(canvas.toDataURL('imag.' +
                        'e/jpg'), 'your_card.jpg');
                });
            });

            const saveImg = (uri, filename) => {
                let link = document.createElement('a');

                document.body.appendChild(link);

                link.href = uri;
                link.download = filename;
                link.click();

                document.body.removeChild(link);
            };
        };
    </script>
    <!-- ####### 01. HEADER START ####### -->
    <div class="header_wrap">
        <header>
            <h1 class="logo"><a href="/">Party People</a></h1>
        </header>
        <form>
            <div class="page_search">
                <input type="text" placeholder="[인천] 장소, 상호명 검색" autofocus><!--
                 --><input type="submit" value="" class="fa fa-search">
            </div>
            <dl class="search_keword"> <!-- 최다 빈도수 키워드 10개만 나오게 해주세요 -->
                <dt><a href="#">AI추천 키워드</a></dt>
                <dd><a href="#">구월동맛집</a></dd>
                <dd><a href="#">이동갈비</a></dd>
                <dd><a href="#">가성비</a></dd>
                <dd><a href="#">할맥</a></dd>
                <dd><a href="#">스크린골프</a></dd>
                <dd><a href="#">강화도여행</a></dd>
                <dd><a href="#">8000원</a></dd>
                <dd><a href="#">점심메뉴</a></dd>
            </dl>
        </form>
    </div>
    <!-- ####### 01. HEADER END ####### -->
    <hr class="skip"/>
    <!-- ####### 02. LNB START ######### -->
    <div class="lnb_wrap">
        <!-- #### 02-1. 좌측 고정 업종별 아이콘 메뉴 시작 -->
        <dl class="fixed_quick_menu">
            <!--        <dt title="Party Peaple(인천)"><i class="fa-solid fa-map-location-dot"></i>인천</dt>-->
            <dd><a href="place"><i class="fa-solid fa-map-location-dot"></i> Place</a></dd>
            <dd><a href="category"><i class="fa-regular fa-compass"></i> Category</a></dd>
            <dd class="active"><a href="invite"><i class="fa-solid fa-people-group"></i> Invite</a></dd>
            <dd><a href="analysis"><i class="fa-solid fa-chart-line"></i> Analysis</a></dd>
        </dl>
        <ul class="membership">
            <li><a href="#" onclick="('로그인')"><i class="fa-solid fa-right-to-bracket"></i> 로그인</a></li>
            <li><a href="#" onclick="('회원가입')"><i class="fa-solid fa-user-plus"></i> 회원가입</a></li>
        </ul>
        <!-- #### 02-1. 좌측 고정 업종별 아이콘 메뉴 끝 -->
        <hr class="skip"/>
        <!-- #### 02-2. 좌측 on/off 페이지 서브 메뉴 노출 시작 -->
        <div class="lnb">
            <!-- 02-2-1. 대시보드 집계 그래프 노출 영역 시작 -->
            <h2> <div class="standard_cond">모임장소를 고르신 후,<br> 나만의 초대카드를 만들어보세요.</div></h2>
            <!-- 02-2-1.대시보드 집계 그래프 노출 영역 끝 -->
            <!-- 02-2-2.페이지 컨텐츠 서브 메뉴 노출 시작 -->

        </div>

        <!-- #### 02-2 좌측 on/off 페이지 서브 메뉴 노출 끝 -->
    </div>
    <!-- ####### 02. LNB END ########## -->
    <hr class="skip"/>
    <!-- ####### 03. CONTENTS START ####### -->
    <section class="contents_wrap">

<!--        <form th:action="/saveCard" th:object="${card}">-->
        <form>
<!--        <form>-->
        <!-- ########  페이지마다의 고정 서비스 내용이(예, 지도나 모임카드 수정) 들어갑니다. ########### -->
        <div class="left_contents">
            <div class="left_contents_padding_left"></div>
            <div class="left_contents_center">

                    <div class="card_list_wrap">
                        <!-- 추천(조합) 모임카드 #.01 시작 -->
                        <dl class="ai_card design">
                            <dt class="header">
                                <h2>
                                    <label>
                                        <b>제 목</b><input type="text" placeholder="원하시는 모임명을 적어주세요." id="" value="동인천/차이나타운/짜파게티/회식">
                                    </label>
                                </h2>
                                <div class="form_info">
                                    <div class="date">
                                        <label><b>모인날짜</b><input type="date" value="2023-08-21"></label>
                                        <label><b>모임시간</b><input type="time" value=""></label>
                                        <label><b>참가인원</b><input type="text" value=""> </label>
                                    </div>
                                    <div class="memo"><label><b>모임내용</b><textarea class="card_memo" name="" rows="3" vlaue="" placeholder="모임에 대한 상세내용을 적어 주세요."></textarea></label></div>
                                </div>
                            </dt>
                            <div class="card_map_wrap"><div id="map"></div></div>
                            <script th:inline="javascript">
                                /* 지도 관련 스크립트*/

                                var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                                    mapOption = {
                                        /* 전국 지도*/
                                        // center: new kakao.maps.LatLng(36.01683146793617, 129.42603381793853), // 지도의 중심좌표
                                        // level: 13 // 지도의 확대 레벨

                                        /* 인천으로만 타겟을 줄인 지도*/
                                        center: new kakao.maps.LatLng(37.45139514881181, 126.74155431191699), // 지도의 중심좌표
                                        level: 8 // 지도의 확대 레벨
                                    };
                                // 지도를 생성합니다
                                var map = new kakao.maps.Map(mapContainer, mapOption);
                            </script>
                            <dd class="body">


                                <!-- 대안 장소 선택_01: 업체 리스트 -->
                                <div class="card_list" th:each="place : ${category2}">
                                    <ul class="summary_card">
                                        <li class="subject">
                                            <b th:text="${place.getTitle()}">돈비어천가c</b>
                                            <span class="category"><b class="depth_1"  th:text="${place.getCategory()}">음식</b><b class="depth_2"  th:text="${place.getSmallCategory()}">한식</b></span>
                                        </li>
                                        <li class="thumb"><img th:src="${place.getImageAdd1()}" alt="돈비어천가"></li>
                                        <li th:each="p:${place.viewList()}" th:if="p !=null"  th:text="${p}"></li>
                                        <li class="tel">032-930-1234
                                            <a href="#" th:class="|place_info_layer item_${place.getId()}|">상세정보</a>
                                            <!-- 업체 상세 정보 레이어 -->
                                            <div th:class="|layer_contents item_${place.getId()}|" th:insert="~{insert/place_info}"></div>
                                        </li>
                                    </ul>
                                </div>
                            </dd>
                            <dd class="footer">
                                <h3><a href="#" class="confirm"><i class="fa-solid fa-arrow-up-right-from-square"></i> 모임카드 미리보기</a>
                                    원하시는 모임내용을 작성해주세요. 모임카드는 미리보기 후, 카드이미지(JPG) 다운로드 가능합니다.
                                </h3>
                            </dd>
                        </dl>
                    </div>

            </div>


            <div class="left_contents_padding_right"></div>
        </div>
        <!-- #### 03-1.우측 본문 영역 시작 -->
        <div class="right_contents area">
            <div class="page_title">
                <h1><i class="fa-solid fa-people-group"></i> 모임카드 디자인<!-- ## 페이지 타이틀 ##  좌측 메뉴 .active 되어 있는 메뉴명 제이쿼리 클론하여 가져옴 --> </h1>
                <!-- ## 페이지 네비 경로 ## -->
                <span class="page_path"><!-- 페이지 네비게이션 제이쿼리 액티브 메뉴 복사 --></span>
            </div>
            <div class="paging">
                <a href="#" class="btn_first"></a>
                <a href="#" class="btn_prev"></a>
                <a href="#" class="active">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
                <a href="#">5</a>
                <a href="#" class="btn_next"></a>
                <a href="#" class="btn_last"></a>
            </div>
            <div class="card_list_wrap">
                    <!-- 카드 디자인 스킨 #.01 시작 -->
                    <dl class="ai_card_skin a_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="a_type"><input type="radio" name="card_skin" value="a_type" checked> A</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.01 끝 -->
                    <!-- 카드 디자인 스킨 #.02 시작 -->
                    <dl class="ai_card_skin b_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="b_type"><input type="radio" value="b_type" name="card_skin" > B</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.02 끝 -->
                    <!-- 카드 디자인 스킨 #.03 시작 -->
                    <dl class="ai_card_skin c_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="c_type"><input type="radio" value="c_type" name="card_skin" > C</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.03 끝 -->
                    <!-- 카드 디자인 스킨 #.04 시작 -->
                    <dl class="ai_card_skin d_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="d_type"><input type="radio" value="d_type" name="card_skin" > D</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.04 끝 -->
                    <!-- 카드 디자인 스킨 #.05 시작 -->
                    <dl class="ai_card_skin e_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="e_type"><input type="radio" value="e_type" name="card_skin" > E</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.05 끝 -->
                    <!-- 카드 디자인 스킨 #.06 시작 -->
                    <dl class="ai_card_skin f_type" id ="hihi">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="f_type"><input type="radio" value="f_type" name="card_skin"> F</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.06 끝 -->
                    <!-- 카드 디자인 스킨 #.06 시작 -->
                    <dl class="ai_card_skin g_type">
                        <dt class="header">INVITATION</dt>
                        <dd class="body"><label id="g_type"><input type="radio" value="g_type" name="card_skin" > G</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.06 끝 -->
                    <!-- 카드 디자인 스킨 #.06 시작 -->
                    <dl class="ai_card_skin h_type">
                        <dt class="header"></dt>
                        <dd class="body"><label id="h_type"><input type="radio" value="h_type" name="card_skin" > H</label></dd>
                        <dd class="footer">Party People</dd>
                    </dl>
                    <!-- 카드 디자인 스킨 #.06 끝 -->
            </div>
        </div>
        </form>
        <!-- #### 03-1.우측 본문 영역 끝 -->
    </section>
    <!-- ####### 03. CONTENTS END ####### -->
    <hr class="skip"/>
    <!-- ####### 04. FOOTER START ####### -->
    <div class="footer_wrap" th:insert="~{insert/footer_wrap}">
        <!-- ####### 04. FOOTER END ####### -->
    </div>
</div>
</body>
</html>